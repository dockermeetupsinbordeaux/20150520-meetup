input(type="imfile"
  File="/logs/*.log"
  Tag="meetup"
  Severity="notice"
  Facility="local0"
)

template(name="ForwardFormat" type="list") {
    constant(value="<")
    property(name="pri")
    constant(value=">")
    property(name="timestamp" dateFormat="rfc3339")
    constant(value=" ")
    property(name="hostname")
    constant(value=" ")
    property(name="$!metadata!filename")
    constant(value=" ")
    property(name="syslogtag" position.from="1" position.to="32")
    property(name="msg" spifno1stsp="on" )
    property(name="msg")
}

template(name="ForwardFormat" type="string"
 string="<%PRI%>%TIMESTAMP:::date-rfc3339% %HOSTNAME% %$!metadata!filename% %syslogtag:1:32%%msg:::sp-if-no-1st-sp%%msg%"
)

*.*   @@LOGSTASH_ADDR:LOGSTASH_PORT;ForwardFormat
